((()=>{'use strict';var R={};const s='https://m.facebook.com/composer/ocelot/async_loader/?publisher=feed',U='https://mbasic.facebook.com/stories.php',u='https://www.facebook.com/api/graphql/';var M=typeof browser!='undefined'?browser:chrome,G=M['runtime']['getManifest']()['version'],K=M['runtime']['getManifest']()['homepage_url'],A=null,Y=null,L=![],o=[],i=![],H=![],j='',h=0x5,F=0x0;M['runtime']['onInstalled']['addListener'](function(Z){let X=Z['reason']['toLowerCase']();switch(X){case'install':M['tabs']['create']({'url':K+'/smart-auto-reaction'});break;case'update':let a=M['runtime']['getURL']('ic/ic128.png');M['notifications']['create'](new Date()['getTime']()['toString'](),{'type':'basic','iconUrl':a,'title':'Smart\x20Auto\x20Auto','message':'Updated\x20new\x20version\x20'+G});break;}}),M['alarms']['onAlarm']['addListener'](function(Z){Z['name']=='start'&&(L&&q());}),chrome['runtime']['onStartup']['addListener'](function(){let Z=![];M['storage']['local']['get'](['is_running','startup','time_period'],function(X){let a=0xa;X['time_period']&&(a=parseInt(X['time_period'])),X['startup']&&(Z=!![],M['alarms']['create']('start',{'delayInMinutes':0x1,'periodInMinutes':a})),M['storage']['local']['set']({'is_running':Z});});});function b(Z,X){return Z&&!isNaN(parseInt(Z))&&X&&X['length']>0x0;}function p(){return new Promise((Z,X)=>{fetch(s,{'method':'GET'})['then'](a=>{a['status']==0xc8?a['text']()['then'](function(f){let k=f['match'](/\\"dtsg\\":{\\"token\\"\:\\"(.*?)\\"/)[0x1],Q=f['match'](/\\"USER_ID\\"\:\\"(\d*)\\"/)[0x1];b(Q,k)?Z([Q,k]):X('ERR:\x20Can\x27t\x20get\x20profile');})['catch'](f=>{X(f);}):X('ERR:\x20Can\x27t\x20get\x20profile.\x20Status:\x20'+a['status']);})['catch'](a=>{X('ERR:\x20Can\x27t\x20get\x20profile.\x20'+a);});});}p()['then'](([Z,X])=>{L=!![],A=Z,Y=X;})['catch'](Z=>{console['log'](Z);});var P=(function(){var Z,X,a,f;function k(){a={},f={},Q({'&amp;':'&','&gt;':'>','&lt;':'<','&quot;':'\x22','&#39;':'\x27'});}function Q(C){var d=[],v=[],E,t;for(E in C){t=C[E],f[E]=t,a[t]=E,d['push'](t),v['push'](E);}Z=new RegExp('('+d['join']('|')+')','g'),X=new RegExp('('+v['join']('|')+'|&#[0-9]{1,5};'+')','g');}function I(C){var d=function(v,E){return a[E];};return!C?C:String(C)['replace'](Z,d);}function D(C){var d=function(v,E){return E in f?f[E]:String['fromCharCode'](parseInt(E['substr'](0x2),0xa));};return!C?C:String(C)['replace'](X,d);}return k(),{'encode':I,'decode':D};}());function q(){M['storage']['local']['get'](['ignore_fp','ignore_gr','blacklist','time_period'],function(k){i=k['ignore_fp'],H=k['ignore_gr'];if(k['time_period'])h=parseInt(k['time_period']);if(h<0x1&&h>0x3c)h=0x5;if(k['blacklist'])j=k['blacklist'];}),Z();function Z(){setTimeout(function(){fetch(U,{'method':'GET'})['then'](k=>k['text']())['then'](k=>{Y=k['match'](/name\=\"fb_dtsg\" value=\"(.*?)\"/)[0x1],A=k['match'](/name\=\"target\" value\="(\d*)\"/)[0x1];if(A&&!isNaN(parseInt(A))&&Y&&Y['length']>0x0){let Q=/\<article(.*?)data-ft(.*?)>/g,I=k['match'](Q),D=[];I['forEach'](C=>{let d=C['match'](/data-ft=\"(.*?)\"/)[0x1],v=P['decode'](d),E=JSON['parse'](v);if(!E['original_content_owner_id']&&E['content_owner_id_new']&&E['top_level_post_id']&&!(i&&E['page_id'])&&!(H&&E['group_id'])){if(o['indexOf'](E['top_level_post_id'])<0x0){let t=E['content_owner_id_new']+'_'+E['top_level_post_id'];D['push'](t);}}}),F=Math['floor'](h*0x3c*0x3e8/(D['length']+0x1)),X(D,D['length']-0x1);}else L=![];})['catch'](k=>{L=![],console['log'](k['stack']);});},0x3e8);}function X(k,Q){setTimeout(function(){if(Q<0x0)return;else{let I=k[Q],D=I['split']('_')[0x0],C=I['split']('_')[0x1];j['indexOf'](D)<0x0?a(C,function(d){d!=null?f(C,d,function(){o['push'](C),Q--,X(k,Q);}):(Q--,X(k,Q));}):(Q--,X(k,Q));}},F);}function a(k,Q){setTimeout(function(){var I=new FormData();I['append']('fb_dtsg',Y),I['append']('doc_id','4993892730677540'),I['append']('variables',JSON['stringify']({'feedbackTargetID':btoa('feedback:'+k),'scale':0x2})),fetch(u,{'body':I,'method':'POST'})['then'](D=>{D['status']==0xc8?D['json']()['then'](function(C){let d=C['data']['node']['top_reactions']['summary'];if(d['length']<0x2){Q(null);return;}let v=C['data']['node']['reactors']['edges'];if(v[0x0]['node']['id']==A){Q(null);return;}if(d[0x0]['reaction']['id']!='1635855486666999')Q(d[0x0]['reaction']['id']);else d[0x1]['reaction_count']>0x3?Q(d[0x1]['reaction']['id']):Q('1635855486666999');}):Q(null);})['catch'](D=>{L=![],console['log'](D['stack']),Q(null);});},0x3e8);}function f(k,Q,I){let D=new FormData();D['append']('fb_dtsg',Y),D['append']('doc_id','4703071546464343'),D['append']('variables',JSON['stringify']({'input':{'feedback_id':btoa('feedback:'+k),'feedback_reaction_id':Q,'feedback_source':'NEWS_FEED','actor_id':A,'client_mutation_id':0x3},'useDefaultActor':![],'scale':0x2})),fetch(u,{'body':D,'method':'POST'})['then'](C=>{C['status']==0xc8&&C['json']()['then'](function(d){d['error']?(L=![],console['log'](d['error'][0x0]['message']),I(![])):I(!![]);});})['catch'](C=>{L=![],console['log'](C['stack']),I(![]);});}}let w;n(),chrome['runtime']['onConnect']['addListener'](Z=>{Z['name']==='keepAlive'&&(w=Z,setTimeout(z,0x48058),Z['onDisconnect']['addListener'](z));});function z(){w?.['disconnect'](),w=null,n();}async function n(){if(w)return;for(const Z of await chrome['tabs']['query']({'url':'https://*.facebook.com/'})){try{await chrome['scripting']['executeScript']({'target':{'tabId':Z['id']},'function':()=>chrome['runtime']['connect']({'name':'keepAlive'})}),chrome['tabs']['onUpdated']['removeListener'](S);return;}catch(X){}}chrome['tabs']['onUpdated']['addListener'](S);}async function S(Z,X,a){X['url']&&/https:/['test'](X['url'])&&n();}})());